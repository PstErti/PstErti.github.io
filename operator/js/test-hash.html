<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>HashEncryptor 测试</title>
    <style>
        body { max-width: 800px; margin: 20px auto; font-family: Arial; }
        .container { padding: 20px; }
        .result { margin: 10px 0; padding: 10px; background: #f0f0f0; }
        input { width: 300px; padding: 5px; }
        button { padding: 5px 15px; margin: 0 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>HashEncryptor 测试工具</h2>
        
        <div>
            <input type="text" id="input" placeholder="请输入要加密的文本">
            <button id="encryptBtn">加密</button>
        </div>

        <div class="result">
            <p>加密结果: </p>
<p><span id="output1"></span></p>
<p><span id="output2"></span></p>
            <p>Salt值: <span id="salt"></span></p>
            <p>加密轮数: <span id="rounds"></span></p>
        </div>
    </div>

    <script type="module">
        import hashEncryptor from './hashEncryptor.js';

        document.getElementById('encryptBtn').addEventListener('click', async () => {
            const input = document.getElementById('input').value;
            if (!input) {
                alert('请输入要加密的文本');
                return;
            }

            try {
                // 获取并显示salt和rounds
                const salt = hashEncryptor._generateSalt(input);
                const rounds = hashEncryptor._calculateRounds(input);
                document.getElementById('salt').textContent = salt;
                document.getElementById('rounds').textContent = rounds;

                const result = await hashEncryptor.encrypt(input);
                document.getElementById('output1').textContent = result.slice(0, 64);
 document.getElementById('output2').textContent = result.slice(64);
            } catch (error) {
                console.error('加密出错:', error);
                alert('加密过程出错: ' + error.message);
            }
        });
    </script>
</body>
</html>